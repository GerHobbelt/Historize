(function(f,c){var d={complete:f.noop,completionsDisplay:f.noop,keys:{enter:13,historyUp:38,historyDown:40,tab:9},target:function(){f(this).trigger("enter").val("")}};var e=[],h=0;function b(k,j){var l=f(this);if(l.val()!==""){e[l.data("historize.id")].push(l.val());l.data("historize.index",null)}return(j.target||f.noop).call(this,k,j)}function g(l,k){var n=f(this),p=n.data("historize.id"),j=n.data("historize.index"),m=e[p],o=m.length;if(p!==c&&o!==0&&j!==0){if(j===null){j=o;n.data("historize.val",n.val())}j--;n.data("historize.index",j);n.val(m[j])}return false}function i(l,k){var n=f(this),p=n.data("historize.id"),j=n.data("historize.index"),m=e[p],o=m.length;if(p!==c&&o!==0&&j<o-1){j++;n.data("historize.index",j);n.val(m[j])}else{if(j==o-1){n.val(n.data("historize.val"));n.removeData(["historize.val","historize.index"])}}return false}function a(m,k){if(!k||!k.hasOwnProperty("complete")){return}var l=k.complete,o=f(this),j,n;switch(f.type(l)){case"function":j=l.call(o[0],m,k);break;case"array":j=l.filter(function(p){return(p.indexOf(o.val())===0)});break;default:j=[]}if(!(n=j.length)){return}if(n===1){return o.val(j[0])}if(f.isFunction(k.completionsDisplay)){k.completionsDisplay.call(o,j)}}f.fn.historize=function(k){var j;if(k==="get"){return e[this.first().data("historize.id")]}if(f.type(k)==="object"){j=f.extend(true,{},d,k)}else{j=f.extend(true,{},d)}this.each(function(l,m){var n=h++;e[n]=[];f(m).data({"historize.id":n,"historize.index":null,"historize.val":null})});this.on("keydown",function(m){var l=null;switch(m.which){case j.keys.enter:l=b;break;case j.keys.historyUp:l=g;break;case j.keys.historyDown:l=i;break;case j.keys.tab:l=a;break}if(l!==null){m.preventDefault()}return(l||f.noop).call(this,m,j)});return this}})(jQuery);